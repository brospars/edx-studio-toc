(function(t){function e(e){for(var r,n,i=e[0],c=e[1],l=e[2],d=0,p=[];d<i.length;d++)n=i[d],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&p.push(a[n][0]),a[n]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(p.length)p.shift()();return o.push.apply(o,l||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],r=!0,i=1;i<s.length;i++){var c=s[i];0!==a[c]&&(r=!1)}r&&(o.splice(e--,1),t=n(n.s=s[0]))}return t}var r={},a={app:0},o=[];function n(e){if(r[e])return r[e].exports;var s=r[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=r,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(s,r,function(e){return t[e]}.bind(null,r));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;o.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0670":function(t,e,s){},1:function(t,e){},"143b":function(t,e,s){},"1b65":function(t,e,s){},"3ab6":function(t,e,s){"use strict";s("143b")},"44d1":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("f751"),s("097d");var r=s("2b0e"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("div",{staticClass:"nav container"},[s("ul",{staticClass:"tab"},[s("li",{staticClass:"tab-item",class:"home"===t.$route.name?"active":""},[s("router-link",{attrs:{to:"/"}},[t._v("Data")])],1),s("li",{staticClass:"tab-item",class:"toc"===t.$route.name?"active":""},[s("router-link",{attrs:{to:"/toc"}},[t._v("Table of Content")])],1),s("li",{staticClass:"tab-item",class:"discourse"===t.$route.name?"active":""},[s("router-link",{attrs:{to:"/discourse"}},[t._v("Discourse")])],1)])]),s("router-view")],1)},o=[],n=(s("3ab6"),s("2877")),i={},c=Object(n["a"])(i,a,o,!1,null,null,null),l=c.exports,u=s("8c4f"),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home container"},[s("div",{staticClass:"card card-data"},[s("div",{staticClass:"card-body"},[s("form",{staticClass:"form-horizontal"},[s("div",{staticClass:"form-group"},[t._m(0),s("div",{staticClass:"col-9 col-sm-12"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.rawData,expression:"rawData"}],staticClass:"form-input",attrs:{id:"rawData",type:"text",placeholder:"Paste raw data here"},domProps:{value:t.rawData},on:{input:function(e){e.target.composing||(t.rawData=e.target.value)}}})])])])])])])},p=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-3 col-sm-12"},[s("label",{staticClass:"form-label",attrs:{for:"rawData"}},[t._v("Raw data")])])}],m=(s("386d"),{name:"home",mounted:function(){var t=new URLSearchParams(window.location.search),e=t.get("baseUrl");this.$store.commit("updateBaseUrl",e)},computed:{rawData:{get:function(){return this.$store.state.rawData},set:function(t){this.$store.commit("updateRawData",t);try{this.$store.commit("updatePlan",JSON.parse(t)),this.$router.push({path:"toc"})}catch(e){console.log("invalid json")}}}}}),f=m,h=Object(n["a"])(f,d,p,!1,null,null,null),v=h.exports,b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"toc container"},[t.rawData?s("div",[s("div",{staticClass:"columns"},[s("div",{staticClass:"column col-12"},[s("options")],1),s("div",{staticClass:"column col-6"},[s("render")],1),s("div",{staticClass:"column col-6"},[s("html-source")],1)])]):s("div",[t._v("\n    No data. Please go to "),s("router-link",{attrs:{to:"/"}},[t._v("Data")])],1)])},g=[],_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"render"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[s("div",{attrs:{id:"render"}},["table"===t.template?s("table-template"):t._e(),"list"===t.template?s("list-template"):t._e()],1)])])])},C=[],y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{ref:"render"},t._l(t.plan,(function(e){return s("li",{key:e.id},[s("a",{attrs:{href:t.buildUrl(e.locator)}},[t._v(t._s(e.title))]),e.subsections.length>0&&t.depth>=2?s("ul",t._l(e.subsections,(function(e){return s("li",{key:e.id},[s("a",{attrs:{href:t.buildUrl(e.locator)}},[t._v(t._s(e.title))]),e.units.length>0&&t.depth>=3?s("ul",t._l(e.units,(function(e){return s("li",{key:e.id},[s("a",{attrs:{href:t.buildUrl(e.locator)}},[t._v(t._s(e.title))])])})),0):t._e()])})),0):t._e()])})),0)},$=[],U={name:"ListTemplate",computed:{depth:function(){return this.$store.state.depth},baseUrl:function(){return this.$store.state.baseUrl},plan:function(){return this.$store.state.plan}},methods:{buildUrl:function(t){return this.baseUrl+t}},mounted:function(){this.$store.commit("updateSource",this.$refs.render.outerHTML)},updated:function(){this.$store.commit("updateSource",this.$refs.render.outerHTML)}},x=U,k=Object(n["a"])(x,y,$,!1,null,null,null),w=k.exports,O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"render",staticClass:"plan"},t._l(t.plan,(function(e){return s("div",{key:e.id,staticClass:"section"},[s("h2",[t._v(t._s(e.title))]),e.subsections.length>0&&t.depth>=2?s("table",{staticStyle:{background:"#f5f5f5"}},[s("tbody",[s("tr",[t._m(0,!0),t.depth>=3?s("th",{staticStyle:{width:"50%"}},[s("b",[t._v("Units")])]):t._e()]),t._l(e.subsections,(function(e){return s("tr",{key:e.id},[s("td",[s("p",{staticStyle:{"font-size":"1.2em"}},[t._v(t._s(e.title))])]),e.units.length>0&&t.depth>=3?s("td",[s("ul",t._l(e.units,(function(e){return s("li",{key:e.id},[s("a",{attrs:{href:t.buildUrl(e.locator)}},[t._v(t._s(e.title))])])})),0)]):t._e()])}))],2)]):t._e()])})),0)},D=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("th",{staticStyle:{width:"50%"}},[s("b",[t._v("Sequences")])])}],T={name:"TableTemplate",computed:{depth:function(){return this.$store.state.depth},baseUrl:function(){return this.$store.state.baseUrl},plan:function(){return this.$store.state.plan}},methods:{buildUrl:function(t){return this.baseUrl+t}},mounted:function(){this.$store.commit("updateSource",this.$refs.render.outerHTML)},updated:function(){this.$store.commit("updateSource",this.$refs.render.outerHTML)}},j=T,P=(s("ba8f"),Object(n["a"])(j,O,D,!1,null,null,null)),E=P.exports,S={name:"Render",components:{TableTemplate:E,ListTemplate:w},computed:{template:function(){return this.$store.state.template}}},R=S,N=Object(n["a"])(R,_,C,!1,null,null,null),A=N.exports,L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"source"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[s("form",[s("div",{staticClass:"form-group"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.source,expression:"source"}],staticClass:"form-input",attrs:{id:"sourceCode",readonly:""},domProps:{value:t.source},on:{input:function(e){e.target.composing||(t.source=e.target.value)}}})])])])])])},M=[],q={name:"Source",computed:{source:{get:function(){return this.$store.state.source},set:function(t){this.$store.commit("updateSource",t)}}}},X=q,F=(s("de66"),Object(n["a"])(X,L,M,!1,null,"77ad85ad",null)),H=F.exports,B=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"options"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[s("form",{staticClass:"form-horizontal"},[s("div",{staticClass:"form-group"},[t._m(0),s("div",{staticClass:"col-9 col-sm-12"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.baseUrl,expression:"baseUrl"}],staticClass:"form-input",attrs:{id:"baseURL",type:"text",placeholder:"https://fun-mooc.fr/courses/course-v1:XXXXXXXX+session01/jump_to_id/"},domProps:{value:t.baseUrl},on:{input:function(e){e.target.composing||(t.baseUrl=e.target.value)}}})])]),s("div",{staticClass:"form-group"},[t._m(1),s("div",{staticClass:"col-9 col-sm-12"},[s("label",{staticClass:"form-radio form-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.depth,expression:"depth"}],attrs:{type:"radio",value:"1"},domProps:{checked:t._q(t.depth,"1")},on:{change:function(e){t.depth="1"}}}),s("i",{staticClass:"form-icon"}),t._v(" Sections\n                    ")]),s("label",{staticClass:"form-radio form-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.depth,expression:"depth"}],attrs:{type:"radio",value:"2"},domProps:{checked:t._q(t.depth,"2")},on:{change:function(e){t.depth="2"}}}),s("i",{staticClass:"form-icon"}),t._v(" Subsections\n                    ")]),s("label",{staticClass:"form-radio form-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.depth,expression:"depth"}],attrs:{type:"radio",value:"3"},domProps:{checked:t._q(t.depth,"3")},on:{change:function(e){t.depth="3"}}}),s("i",{staticClass:"form-icon"}),t._v(" Units\n                    ")])])]),s("div",{staticClass:"form-group"},[t._m(2),s("div",{staticClass:"col-9 col-sm-12"},[s("label",{staticClass:"form-radio form-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.template,expression:"template"}],attrs:{type:"radio",value:"table"},domProps:{checked:t._q(t.template,"table")},on:{change:function(e){t.template="table"}}}),s("i",{staticClass:"form-icon"}),t._v(" Table\n                    ")]),s("label",{staticClass:"form-radio form-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.template,expression:"template"}],attrs:{type:"radio",value:"list"},domProps:{checked:t._q(t.template,"list")},on:{change:function(e){t.template="list"}}}),s("i",{staticClass:"form-icon"}),t._v(" List\n                    ")])])])])])])])},I=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-3 col-sm-12"},[s("label",{staticClass:"form-label",attrs:{for:"baseURL"}},[t._v("Base URL")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-3 col-sm-12"},[s("label",{staticClass:"form-label"},[t._v("Depth")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-3 col-sm-12"},[s("label",{staticClass:"form-label"},[t._v("Template")])])}],K={name:"Options",computed:{baseUrl:{get:function(){return this.$store.state.baseUrl},set:function(t){this.$store.commit("updateBaseUrl",t)}},depth:{get:function(){return this.$store.state.depth},set:function(t){this.$store.commit("updateDepth",t)}},template:{get:function(){return this.$store.state.template},set:function(t){this.$store.commit("updateTemplate",t)}}}},z=K,J=Object(n["a"])(z,B,I,!1,null,"7629360a",null),V=J.exports,G={name:"Toc",components:{Options:V,HtmlSource:H,Render:A},computed:{rawData:function(){return this.$store.state.rawData}}},Q=G,W=Object(n["a"])(Q,b,g,!1,null,"7c3295d1",null),Y=W.exports,Z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"discourse container"},[t.plan&&t.plan.length?s("div",[s("div",{staticClass:"columns"},[s("div",{staticClass:"column col-12"},[s("discourse-options")],1),s("div",{staticClass:"column col-12"},[s("button",{staticClass:"btn btn-primary",attrs:{disabled:!t.$store.state.discourseUrl||!t.$store.state.discourseUsername||!t.$store.state.discourseToken},on:{click:function(e){return t.fetchCategories()}}},[t._v("\n          Fetch existing categories\n        ")]),s("button",{staticClass:"btn btn-primary",attrs:{disabled:!t.$store.state.discourseUrl||!t.$store.state.discourseUsername||!t.$store.state.discourseToken},on:{click:function(e){return t.createCategories()}}},[t._v("\n          Create "+t._s(t.categoryCount)+" categories and "+t._s(t.subcategoryCount)+" subcategories\n        ")]),s("button",{staticClass:"btn btn-primary",attrs:{disabled:!t.$store.state.discourseUrl||!t.$store.state.discourseUsername||!t.$store.state.discourseToken},on:{click:function(e){return t.createCategories(!0)}}},[t._v("\n          Create "+t._s(t.categoryCount)+" categories and "+t._s(t.subcategoryCount)+" subcategories (dry run)\n        ")])]),t.logs&&t.logs.length?s("div",{staticClass:"column col-12"},[s("div",{staticClass:"card"},[s("div",{ref:"logContainer",staticClass:"card-body logs"},t._l(t.logs,(function(e,r){return s("div",{key:r,staticClass:"log",class:"text-"+e.type},[t._v(t._s(e.message))])})),0)])]):t._e(),t.existingCategories.length?s("div",{staticClass:"column col-12"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[s("table",{staticClass:"table"},[t._m(0),t._l(t.existingCategories,(function(e,r){return s("tr",{key:r,class:e.parent_category_id?"subcategory":""},[s("td",[t._v(t._s(e.id))]),s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"category.name"}],attrs:{type:"text"},domProps:{value:e.name},on:{input:function(s){s.target.composing||t.$set(e,"name",s.target.value)}}})]),s("td",[t._v("#"),s("input",{directives:[{name:"model",rawName:"v-model",value:e.color,expression:"category.color"}],attrs:{type:"text"},domProps:{value:e.color},on:{input:function(s){s.target.composing||t.$set(e,"color",s.target.value)}}})]),s("td",[t._v(t._s(e.read_restricted?"🔒":""))]),s("td",[s("button",{staticClass:"btn btn-sm btn-success",on:{click:function(s){return t.updateCategory(e)}}},[t._v("Update")]),s("button",{staticClass:"btn btn-sm btn-error",on:{click:function(s){return t.deleteCategory(e.id)}}},[t._v("Delete")])])])}))],2)])])]):t._e()])]):s("div",[t._v("\n    No data. Please go to "),s("router-link",{attrs:{to:"/"}},[t._v("Data")])],1)])},tt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("th",[t._v("id")]),s("th",[t._v("name")]),s("th",[t._v("color")]),s("th"),s("th",[t._v("actions")])])}],et=(s("8e6e"),s("456d"),s("6b54"),s("bd86")),st=(s("3b2b"),s("28a5"),s("a481"),s("ac4d"),s("8a81"),s("96cf"),s("3b8d")),rt=(s("7f7f"),s("7514"),s("ac6a"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"discourse-options"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body"},[s("form",{staticClass:"form-horizontal"},[s("div",{staticClass:"form-group"},[t._m(0),s("div",{staticClass:"col-9 col-sm-12"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.discourseUrl,expression:"discourseUrl"}],staticClass:"form-input",attrs:{id:"discourseURL",type:"text",placeholder:"https://discourse.com/"},domProps:{value:t.discourseUrl},on:{input:function(e){e.target.composing||(t.discourseUrl=e.target.value)}}})])]),s("div",{staticClass:"form-group"},[t._m(1),s("div",{staticClass:"col-9 col-sm-12"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.discourseUsername,expression:"discourseUsername"}],staticClass:"form-input",attrs:{id:"discourseUsername",type:"text",placeholder:"foobar"},domProps:{value:t.discourseUsername},on:{input:function(e){e.target.composing||(t.discourseUsername=e.target.value)}}})])]),s("div",{staticClass:"form-group"},[t._m(2),s("div",{staticClass:"col-9 col-sm-12"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.discourseToken,expression:"discourseToken"}],staticClass:"form-input",attrs:{id:"discourseToken",type:"text",placeholder:"5aef54e5a4f4e5a444e5feaf54a54e5f43e1af1"},domProps:{value:t.discourseToken},on:{input:function(e){e.target.composing||(t.discourseToken=e.target.value)}}})])]),s("div",{staticClass:"form-group"},[t._m(3),s("div",{staticClass:"col-9 col-sm-12"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.createUnit,expression:"createUnit"}],attrs:{id:"createUnit",type:"checkbox"},domProps:{checked:Array.isArray(t.createUnit)?t._i(t.createUnit,null)>-1:t.createUnit},on:{change:function(e){var s=t.createUnit,r=e.target,a=!!r.checked;if(Array.isArray(s)){var o=null,n=t._i(s,o);r.checked?n<0&&(t.createUnit=s.concat([o])):n>-1&&(t.createUnit=s.slice(0,n).concat(s.slice(n+1)))}else t.createUnit=a}}})])])])])])])}),at=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-3 col-sm-12"},[s("label",{staticClass:"form-label",attrs:{for:"discourseURL"}},[t._v("Discourse URL")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-3 col-sm-12"},[s("label",{staticClass:"form-label",attrs:{for:"discourseUsername"}},[t._v("Discourse Username")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-3 col-sm-12"},[s("label",{staticClass:"form-label",attrs:{for:"discourseToken"}},[t._v("Discourse API token")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-3 col-sm-12"},[s("label",{staticClass:"form-label",attrs:{for:"createUnit"}},[t._v("Use units as subcategories")])])}],ot={name:"DiscourseOptions",computed:{discourseUrl:{get:function(){return this.$store.state.discourseUrl},set:function(t){this.$store.commit("updateDiscourseUrl",t)}},discourseUsername:{get:function(){return this.$store.state.discourseUsername},set:function(t){this.$store.commit("updateDiscourseUsername",t)}},discourseToken:{get:function(){return this.$store.state.discourseToken},set:function(t){this.$store.commit("updateDiscourseToken",t)}},createUnit:{get:function(){return this.$store.state.createUnit},set:function(t){this.$store.commit("updateCreateUnit",t)}}}},nt=ot,it=Object(n["a"])(nt,rt,at,!1,null,"2da9cfd0",null),ct=it.exports;function lt(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,r)}return s}function ut(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?lt(Object(s),!0).forEach((function(e){Object(et["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):lt(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var dt={name:"Discourse",components:{DiscourseOptions:ct},data:function(){return{dryRun:!1,logs:[],parentCategories:[],existingCategories:[]}},computed:{plan:function(){try{this.$store.commit("updatePlan",JSON.parse(this.$store.state.rawData))}catch(t){console.log("invalid json")}return this.$store.state.plan},categoryCount:function(){return this.$store.state.plan.length},subcategoryCount:function(){return this.$store.state.createUnit?this.$store.state.plan.reduce((function(t,e){return t+e.subsections.reduce((function(t,e){return t+e.units.length}),0)}),0):this.$store.state.plan.reduce((function(t,e){return t+e.subsections.length}),0)}},methods:{fetchCategories:function(){var t=this;return new Promise((function(e,s){t.$http.get(t.$store.state.discourseUrl+"categories.json",{headers:{"Api-Key":t.$store.state.discourseToken,"Api-Username":t.$store.state.discourseUsername}}).then((function(r){r.body.category_list&&r.body.category_list.categories&&(t.parentCategories=r.body.category_list.categories,t.$http.get(t.$store.state.discourseUrl+"site.json",{headers:{"Api-Key":t.$store.state.discourseToken,"Api-Username":t.$store.state.discourseUsername}}).then((function(s){s.body.categories&&(t.existingCategories=t.parentCategories.reduce((function(t,e){return t.push(e),e.subcategory_ids&&e.subcategory_ids.forEach((function(e){t.push(s.body.categories.find((function(t){return t.id===e})))})),t}),[])),e()}),(function(t){alert("Error while fetching categories, please check discourse options"),s(t)})))}),(function(t){alert("Error while fetching categories, please check discourse options"),s(t)}))}))},updateCategory:function(t){var e=this;this.$http.put(this.$store.state.discourseUrl+"categories/"+t.id,this.getFormData({name:t.name,color:t.color,text_color:t.text_color}),{headers:{"Api-Key":this.$store.state.discourseToken,"Api-Username":this.$store.state.discourseUsername}}).then((function(t){e.fetchCategories()}),(function(t){alert("Error updating category")}))},deleteCategory:function(t){var e=this;this.$http.delete(this.$store.state.discourseUrl+"categories/"+t,{headers:{"Api-Key":this.$store.state.discourseToken,"Api-Username":this.$store.state.discourseUsername}}).then((function(t){e.fetchCategories()}),(function(t){alert("Error deleting category (category is not empty or doesn't exist)")}))},createCategories:function(){var t=Object(st["a"])(regeneratorRuntime.mark((function t(e){var s,r,a,o,n,i,c,l,u,d,p,m,f,h,v,b,g,_,C,y,$,U,x,k,w,O,D,T,j,P,E,S;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.fetchCategories();case 2:this.dryRun=!!e,this.logs=[],s=!0,r=!1,a=void 0,t.prev=7,o=this.plan[Symbol.iterator]();case 9:if(s=(n=o.next()).done){t.next=106;break}if(i=n.value,!this.$store.state.createUnit){t.next=72;break}return c=i.title.replace("Module ","M"),t.next=15,this.createCategory(c);case 15:l=t.sent,u=!0,d=!1,p=void 0,t.prev=19,m=i.subsections[Symbol.iterator]();case 21:if(u=(f=m.next()).done){t.next=56;break}h=f.value,v=!0,b=!1,g=void 0,t.prev=26,_=h.units[Symbol.iterator]();case 28:if(v=(C=_.next()).done){t.next=39;break}if(y=C.value,$=-1!==i.title.indexOf("Module")?c.split(":")[0].split(".")[0]+". ":"",U=y.title.replace("Lecture: ","").replace("Video: ",""),x="".concat($).concat(U).substring(0,50),new RegExp(["Forum","overview"].join("|")).test(x)){t.next=36;break}return t.next=36,this.createCategory(x,l);case 36:v=!0,t.next=28;break;case 39:t.next=45;break;case 41:t.prev=41,t.t0=t["catch"](26),b=!0,g=t.t0;case 45:t.prev=45,t.prev=46,v||null==_.return||_.return();case 48:if(t.prev=48,!b){t.next=51;break}throw g;case 51:return t.finish(48);case 52:return t.finish(45);case 53:u=!0,t.next=21;break;case 56:t.next=62;break;case 58:t.prev=58,t.t1=t["catch"](19),d=!0,p=t.t1;case 62:t.prev=62,t.prev=63,u||null==m.return||m.return();case 65:if(t.prev=65,!d){t.next=68;break}throw p;case 68:return t.finish(65);case 69:return t.finish(62);case 70:t.next=103;break;case 72:return k=i.title.substring(0,50),t.next=75,this.createCategory(k);case 75:w=t.sent,O=!0,D=!1,T=void 0,t.prev=79,j=i.subsections[Symbol.iterator]();case 81:if(O=(P=j.next()).done){t.next=89;break}return E=P.value,S="".concat(E.title).substring(0,50),t.next=86,this.createCategory(S,w);case 86:O=!0,t.next=81;break;case 89:t.next=95;break;case 91:t.prev=91,t.t2=t["catch"](79),D=!0,T=t.t2;case 95:t.prev=95,t.prev=96,O||null==j.return||j.return();case 98:if(t.prev=98,!D){t.next=101;break}throw T;case 101:return t.finish(98);case 102:return t.finish(95);case 103:s=!0,t.next=9;break;case 106:t.next=112;break;case 108:t.prev=108,t.t3=t["catch"](7),r=!0,a=t.t3;case 112:t.prev=112,t.prev=113,s||null==o.return||o.return();case 115:if(t.prev=115,!r){t.next=118;break}throw a;case 118:return t.finish(115);case 119:return t.finish(112);case 120:case"end":return t.stop()}}),t,this,[[7,108,112,120],[19,58,62,70],[26,41,45,53],[46,,48,52],[63,,65,69],[79,91,95,103],[96,,98,102],[113,,115,119]])})));function e(e){return t.apply(this,arguments)}return e}(),createCategory:function(t,e){var s=this;return new Promise((function(r,a){var o=s.randomColor(),n=s.existingCategories.find((function(e){return e.name===t})),i={name:t,color:o,text_color:"ffffff"},c=t;e&&(i.color=e.color,i.parent_category_id=e.id,c="├── "+t),n?(s.log(c+" (Category already exists)","warning"),r({id:n.id,color:n.color})):setTimeout((function(){s.postCategoryRequest(i).then((function(t){var e=t.body.category;s.log(c+" (id: ".concat(e.id," ").concat(e.parentId?"parentId: "+e.parentId:"",")"),"success"),r({id:e.id,color:o})}),(function(t){s.log(c,"error"),a(new Error(t.body))}))}),s.dryRun?10:500)}))},postCategoryRequest:function(t){return this.dryRun?Promise.resolve({body:{category:ut({id:Date.now().toString().substr(-4),color:"#fff"},!!t.parent_category_id&&{parentId:t.parent_category_id})}}):this.$http.post(this.$store.state.discourseUrl+"categories.json",this.getFormData(t),{headers:{"Api-Key":this.$store.state.discourseToken,"Api-Username":this.$store.state.discourseUsername}})},log:function(t,e){this.logs.push({message:t,type:e}),this.$nextTick((function(){this.$refs.logContainer&&this.$refs.logContainer.scrollTo(0,this.$refs.logContainer.scrollHeight+20)}))},randomColor:function(){for(var t="0123456789ABCDEF",e="",s=0;s<6;s++)e+=t[Math.floor(16*Math.random())];return e},getFormData:function(t){var e=new FormData;return Object.keys(t).forEach((function(s){return e.append(s,t[s])})),e}}},pt=dt,mt=(s("e980"),Object(n["a"])(pt,Z,tt,!1,null,"2007749c",null)),ft=mt.exports;r["a"].use(u["a"]);var ht=new u["a"]({routes:[{path:"/",name:"home",component:v},{path:"/toc",name:"toc",component:Y},{path:"/discourse",name:"discourse",component:ft}]}),vt=s("2f62"),bt=s("a6c1"),gt=s.n(bt);r["a"].use(vt["a"]);var _t=new vt["a"].Store({state:{baseUrl:"",rawData:"",plan:[],source:"",depth:3,template:"table",discourseToken:"",discourseUrl:"",discourseUsername:"",createUnit:!1},mutations:{updateBaseUrl:function(t,e){r["a"].set(t,"baseUrl",e)},updateRawData:function(t,e){r["a"].set(t,"rawData",e)},updatePlan:function(t,e){r["a"].set(t,"plan",e)},updateSource:function(t,e){r["a"].set(t,"source",gt.a.html_beautify(e))},updateDepth:function(t,e){r["a"].set(t,"depth",e)},updateTemplate:function(t,e){r["a"].set(t,"template",e)},updateDiscourseUrl:function(t,e){r["a"].set(t,"discourseUrl",e)},updateDiscourseUsername:function(t,e){r["a"].set(t,"discourseUsername",e)},updateDiscourseToken:function(t,e){r["a"].set(t,"discourseToken",e)},updateCreateUnit:function(t,e){r["a"].set(t,"createUnit",e)}},actions:{}}),Ct=s("28dd");s("7a07"),s("2698");r["a"].config.productionTip=!1,r["a"].use(Ct["a"]),new r["a"]({router:ht,store:_t,render:function(t){return t(l)}}).$mount("#app")},ba8f:function(t,e,s){"use strict";s("44d1")},de66:function(t,e,s){"use strict";s("0670")},e980:function(t,e,s){"use strict";s("1b65")}});
//# sourceMappingURL=app.js.map