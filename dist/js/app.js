(function(e){function t(t){for(var s,o,i=t[0],c=t[1],u=t[2],d=0,p=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);l&&l(t);while(p.length)p.shift()();return n.push.apply(n,u||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],s=!0,i=1;i<r.length;i++){var c=r[i];0!==a[c]&&(s=!1)}s&&(n.splice(t--,1),e=o(o.s=r[0]))}return e}var s={},a={app:0},n=[];function o(t){if(s[t])return s[t].exports;var r=s[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=s,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(r,s,function(t){return e[t]}.bind(null,s));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0670":function(e,t,r){},1:function(e,t){},"143b":function(e,t,r){},"290a":function(e,t,r){"use strict";r("3399")},3399:function(e,t,r){},"3ab6":function(e,t,r){"use strict";r("143b")},"44d1":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d");var s=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("div",{staticClass:"nav container"},[r("ul",{staticClass:"tab"},[r("li",{staticClass:"tab-item",class:"home"===e.$route.name?"active":""},[r("router-link",{attrs:{to:"/"}},[e._v("Data")])],1),r("li",{staticClass:"tab-item",class:"toc"===e.$route.name?"active":""},[r("router-link",{attrs:{to:"/toc"}},[e._v("Table of Content")])],1),r("li",{staticClass:"tab-item",class:"discourse"===e.$route.name?"active":""},[r("router-link",{attrs:{to:"/discourse"}},[e._v("Discourse")])],1)])]),r("router-view")],1)},n=[],o=(r("3ab6"),r("2877")),i={},c=Object(o["a"])(i,a,n,!1,null,null,null),u=c.exports,l=r("8c4f"),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home container"},[r("div",{staticClass:"card card-data"},[r("div",{staticClass:"card-body"},[r("form",{staticClass:"form-horizontal"},[r("div",{staticClass:"form-group"},[e._m(0),r("div",{staticClass:"col-9 col-sm-12"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.rawData,expression:"rawData"}],staticClass:"form-input",attrs:{id:"rawData",type:"text",placeholder:"Paste raw data here"},domProps:{value:e.rawData},on:{input:function(t){t.target.composing||(e.rawData=t.target.value)}}})])])])])])])},p=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"col-3 col-sm-12"},[r("label",{staticClass:"form-label",attrs:{for:"rawData"}},[e._v("Raw data")])])}],m=(r("386d"),{name:"home",mounted:function(){var e=new URLSearchParams(window.location.search),t=e.get("baseUrl");this.$store.commit("updateBaseUrl",t)},computed:{rawData:{get:function(){return this.$store.state.rawData},set:function(e){this.$store.commit("updateRawData",e);try{this.$store.commit("updatePlan",JSON.parse(e)),this.$router.push({path:"toc"})}catch(t){console.log("invalid json")}}}}}),f=m,h=Object(o["a"])(f,d,p,!1,null,null,null),v=h.exports,g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"toc container"},[e.rawData?r("div",[r("div",{staticClass:"columns"},[r("div",{staticClass:"column col-12"},[r("options")],1),r("div",{staticClass:"column col-6"},[r("render")],1),r("div",{staticClass:"column col-6"},[r("html-source")],1)])]):r("div",[e._v("\n    No data. Please go to "),r("router-link",{attrs:{to:"/"}},[e._v("Data")])],1)])},b=[],y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"render"},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-body"},[r("div",{attrs:{id:"render"}},["table"===e.template?r("table-template"):e._e(),"list"===e.template?r("list-template"):e._e()],1)])])])},_=[],C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",{ref:"render"},e._l(e.plan,(function(t){return r("li",{key:t.id},[r("a",{attrs:{href:e.buildUrl(t.locator)}},[e._v(e._s(t.title))]),t.subsections.length>0&&e.depth>=2?r("ul",e._l(t.subsections,(function(t){return r("li",{key:t.id},[r("a",{attrs:{href:e.buildUrl(t.locator)}},[e._v(e._s(t.title))]),t.units.length>0&&e.depth>=3?r("ul",e._l(t.units,(function(t){return r("li",{key:t.id},[r("a",{attrs:{href:e.buildUrl(t.locator)}},[e._v(e._s(t.title))])])})),0):e._e()])})),0):e._e()])})),0)},x=[],$={name:"ListTemplate",computed:{depth:function(){return this.$store.state.depth},baseUrl:function(){return this.$store.state.baseUrl},plan:function(){return this.$store.state.plan}},methods:{buildUrl:function(e){return this.baseUrl+e}},mounted:function(){this.$store.commit("updateSource",this.$refs.render.outerHTML)},updated:function(){this.$store.commit("updateSource",this.$refs.render.outerHTML)}},U=$,k=Object(o["a"])(U,C,x,!1,null,null,null),w=k.exports,O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{ref:"render",staticClass:"plan"},e._l(e.plan,(function(t){return r("div",{key:t.id,staticClass:"section"},[r("h2",[e._v(e._s(t.title))]),t.subsections.length>0&&e.depth>=2?r("table",{staticStyle:{background:"#f5f5f5"}},[r("tbody",[r("tr",[e._m(0,!0),e.depth>=3?r("th",{staticStyle:{width:"50%"}},[r("b",[e._v("Units")])]):e._e()]),e._l(t.subsections,(function(t){return r("tr",{key:t.id},[r("td",[r("p",{staticStyle:{"font-size":"1.2em"}},[e._v(e._s(t.title))])]),t.units.length>0&&e.depth>=3?r("td",[r("ul",e._l(t.units,(function(t){return r("li",{key:t.id},[r("a",{attrs:{href:e.buildUrl(t.locator)}},[e._v(e._s(t.title))])])})),0)]):e._e()])}))],2)]):e._e()])})),0)},D=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("th",{staticStyle:{width:"50%"}},[r("b",[e._v("Sequences")])])}],T={name:"TableTemplate",computed:{depth:function(){return this.$store.state.depth},baseUrl:function(){return this.$store.state.baseUrl},plan:function(){return this.$store.state.plan}},methods:{buildUrl:function(e){return this.baseUrl+e}},mounted:function(){this.$store.commit("updateSource",this.$refs.render.outerHTML)},updated:function(){this.$store.commit("updateSource",this.$refs.render.outerHTML)}},j=T,P=(r("ba8f"),Object(o["a"])(j,O,D,!1,null,null,null)),S=P.exports,E={name:"Render",components:{TableTemplate:S,ListTemplate:w},computed:{template:function(){return this.$store.state.template}}},R=E,A=Object(o["a"])(R,y,_,!1,null,null,null),N=A.exports,L=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"source"},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-body"},[r("form",[r("div",{staticClass:"form-group"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.source,expression:"source"}],staticClass:"form-input",attrs:{id:"sourceCode",readonly:""},domProps:{value:e.source},on:{input:function(t){t.target.composing||(e.source=t.target.value)}}})])])])])])},M=[],q={name:"Source",computed:{source:{get:function(){return this.$store.state.source},set:function(e){this.$store.commit("updateSource",e)}}}},F=q,X=(r("de66"),Object(o["a"])(F,L,M,!1,null,"77ad85ad",null)),H=X.exports,K=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"options"},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-body"},[r("form",{staticClass:"form-horizontal"},[r("div",{staticClass:"form-group"},[e._m(0),r("div",{staticClass:"col-9 col-sm-12"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.baseUrl,expression:"baseUrl"}],staticClass:"form-input",attrs:{id:"baseURL",type:"text",placeholder:"https://fun-mooc.fr/courses/course-v1:XXXXXXXX+session01/jump_to_id/"},domProps:{value:e.baseUrl},on:{input:function(t){t.target.composing||(e.baseUrl=t.target.value)}}})])]),r("div",{staticClass:"form-group"},[e._m(1),r("div",{staticClass:"col-9 col-sm-12"},[r("label",{staticClass:"form-radio form-inline"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.depth,expression:"depth"}],attrs:{type:"radio",value:"1"},domProps:{checked:e._q(e.depth,"1")},on:{change:function(t){e.depth="1"}}}),r("i",{staticClass:"form-icon"}),e._v(" Sections\n                    ")]),r("label",{staticClass:"form-radio form-inline"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.depth,expression:"depth"}],attrs:{type:"radio",value:"2"},domProps:{checked:e._q(e.depth,"2")},on:{change:function(t){e.depth="2"}}}),r("i",{staticClass:"form-icon"}),e._v(" Subsections\n                    ")]),r("label",{staticClass:"form-radio form-inline"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.depth,expression:"depth"}],attrs:{type:"radio",value:"3"},domProps:{checked:e._q(e.depth,"3")},on:{change:function(t){e.depth="3"}}}),r("i",{staticClass:"form-icon"}),e._v(" Units\n                    ")])])]),r("div",{staticClass:"form-group"},[e._m(2),r("div",{staticClass:"col-9 col-sm-12"},[r("label",{staticClass:"form-radio form-inline"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.template,expression:"template"}],attrs:{type:"radio",value:"table"},domProps:{checked:e._q(e.template,"table")},on:{change:function(t){e.template="table"}}}),r("i",{staticClass:"form-icon"}),e._v(" Table\n                    ")]),r("label",{staticClass:"form-radio form-inline"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.template,expression:"template"}],attrs:{type:"radio",value:"list"},domProps:{checked:e._q(e.template,"list")},on:{change:function(t){e.template="list"}}}),r("i",{staticClass:"form-icon"}),e._v(" List\n                    ")])])])])])])])},B=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"col-3 col-sm-12"},[r("label",{staticClass:"form-label",attrs:{for:"baseURL"}},[e._v("Base URL")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"col-3 col-sm-12"},[r("label",{staticClass:"form-label"},[e._v("Depth")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"col-3 col-sm-12"},[r("label",{staticClass:"form-label"},[e._v("Template")])])}],I={name:"Options",computed:{baseUrl:{get:function(){return this.$store.state.baseUrl},set:function(e){this.$store.commit("updateBaseUrl",e)}},depth:{get:function(){return this.$store.state.depth},set:function(e){this.$store.commit("updateDepth",e)}},template:{get:function(){return this.$store.state.template},set:function(e){this.$store.commit("updateTemplate",e)}}}},z=I,J=Object(o["a"])(z,K,B,!1,null,"7629360a",null),V=J.exports,G={name:"Toc",components:{Options:V,HtmlSource:H,Render:N},computed:{rawData:function(){return this.$store.state.rawData}}},Q=G,W=Object(o["a"])(Q,g,b,!1,null,"7c3295d1",null),Y=W.exports,Z=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"discourse container"},[e.plan&&e.plan.length?r("div",[r("div",{staticClass:"columns"},[r("div",{staticClass:"column col-12"},[r("discourse-options")],1),r("div",{staticClass:"column col-12"},[r("button",{staticClass:"btn btn-primary",attrs:{disabled:!e.$store.state.discourseUrl||!e.$store.state.discourseUsername||!e.$store.state.discourseToken},on:{click:function(t){return e.fetchCategories()}}},[e._v("\n          Fetch existing categories\n        ")]),r("button",{staticClass:"btn btn-primary",attrs:{disabled:!e.$store.state.discourseUrl||!e.$store.state.discourseUsername||!e.$store.state.discourseToken},on:{click:function(t){return e.createCategories()}}},[e._v("\n          Create "+e._s(e.categoryCount)+" categories and "+e._s(e.subcategoryCount)+" subcategories\n        ")]),r("button",{staticClass:"btn btn-primary",attrs:{disabled:!e.$store.state.discourseUrl||!e.$store.state.discourseUsername||!e.$store.state.discourseToken},on:{click:function(t){return e.createCategories(!0)}}},[e._v("\n          Create "+e._s(e.categoryCount)+" categories and "+e._s(e.subcategoryCount)+" subcategories (dry run)\n        ")]),r("button",{staticClass:"btn btn-primary btn-error",attrs:{disabled:!e.$store.state.discourseUrl||!e.$store.state.discourseUsername||!e.$store.state.discourseToken},on:{click:function(t){return e.hideAllAboutCategories()}}},[e._v("\n          Unlist all 'about category' topics\n        ")])]),e.logs&&e.logs.length?r("div",{staticClass:"column col-12"},[r("div",{staticClass:"card"},[r("div",{ref:"logContainer",staticClass:"card-body logs"},e._l(e.logs,(function(t,s){return r("div",{key:s,staticClass:"log",class:"text-"+t.type},[e._v(e._s(t.message))])})),0)])]):e._e(),e.existingCategories.length?r("div",{staticClass:"column col-12"},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-body"},[r("table",{staticClass:"table"},[e._m(0),e._l(e.existingCategories,(function(t,s){return r("tr",{key:s,class:t.parent_category_id?"subcategory":""},[r("td",[e._v(e._s(t.id))]),r("td",[r("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"category.name"}],attrs:{type:"text"},domProps:{value:t.name},on:{input:function(r){r.target.composing||e.$set(t,"name",r.target.value)}}})]),r("td",[e._v("#"),r("input",{directives:[{name:"model",rawName:"v-model",value:t.color,expression:"category.color"}],attrs:{type:"text"},domProps:{value:t.color},on:{input:function(r){r.target.composing||e.$set(t,"color",r.target.value)}}})]),r("td",[e._v(e._s(t.read_restricted?"🔒":""))]),r("td",[r("button",{staticClass:"btn btn-sm btn-success",on:{click:function(r){return e.updateCategory(t)}}},[e._v("Update")]),r("button",{staticClass:"btn btn-sm btn-error",on:{click:function(r){return e.deleteCategory(t.id)}}},[e._v("Delete")])])])}))],2)])])]):e._e()])]):r("div",[e._v("\n    No data. Please go to "),r("router-link",{attrs:{to:"/"}},[e._v("Data")])],1)])},ee=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("tr",[r("th",[e._v("id")]),r("th",[e._v("name")]),r("th",[e._v("color")]),r("th"),r("th",[e._v("actions")])])}],te=(r("8e6e"),r("456d"),r("6b54"),r("bd86")),re=(r("3b2b"),r("a481"),r("ac4d"),r("8a81"),r("28a5"),r("96cf"),r("3b8d")),se=(r("7f7f"),r("7514"),r("ac6a"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"discourse-options"},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-body"},[r("form",{staticClass:"form-horizontal"},[r("div",{staticClass:"form-group"},[e._m(0),r("div",{staticClass:"col-9 col-sm-12"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.discourseUrl,expression:"discourseUrl"}],staticClass:"form-input",attrs:{id:"discourseURL",type:"text",placeholder:"https://discourse.com/"},domProps:{value:e.discourseUrl},on:{input:function(t){t.target.composing||(e.discourseUrl=t.target.value)}}})])]),r("div",{staticClass:"form-group"},[e._m(1),r("div",{staticClass:"col-9 col-sm-12"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.discourseUsername,expression:"discourseUsername"}],staticClass:"form-input",attrs:{id:"discourseUsername",type:"text",placeholder:"foobar"},domProps:{value:e.discourseUsername},on:{input:function(t){t.target.composing||(e.discourseUsername=t.target.value)}}})])]),r("div",{staticClass:"form-group"},[e._m(2),r("div",{staticClass:"col-9 col-sm-12"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.discourseToken,expression:"discourseToken"}],staticClass:"form-input",attrs:{id:"discourseToken",type:"text",placeholder:"5aef54e5a4f4e5a444e5feaf54a54e5f43e1af1"},domProps:{value:e.discourseToken},on:{input:function(t){t.target.composing||(e.discourseToken=t.target.value)}}})])]),r("div",{staticClass:"form-group"},[e._m(3),r("div",{staticClass:"col-9 col-sm-12"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.createUnit,expression:"createUnit"}],attrs:{id:"createUnit",type:"checkbox"},domProps:{checked:Array.isArray(e.createUnit)?e._i(e.createUnit,null)>-1:e.createUnit},on:{change:function(t){var r=e.createUnit,s=t.target,a=!!s.checked;if(Array.isArray(r)){var n=null,o=e._i(r,n);s.checked?o<0&&(e.createUnit=r.concat([n])):o>-1&&(e.createUnit=r.slice(0,o).concat(r.slice(o+1)))}else e.createUnit=a}}})])])])])])])}),ae=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"col-3 col-sm-12"},[r("label",{staticClass:"form-label",attrs:{for:"discourseURL"}},[e._v("Discourse URL")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"col-3 col-sm-12"},[r("label",{staticClass:"form-label",attrs:{for:"discourseUsername"}},[e._v("Discourse Username")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"col-3 col-sm-12"},[r("label",{staticClass:"form-label",attrs:{for:"discourseToken"}},[e._v("Discourse API token")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"col-3 col-sm-12"},[r("label",{staticClass:"form-label",attrs:{for:"createUnit"}},[e._v("Use units as subcategories")])])}],ne={name:"DiscourseOptions",computed:{discourseUrl:{get:function(){return this.$store.state.discourseUrl},set:function(e){this.$store.commit("updateDiscourseUrl",e)}},discourseUsername:{get:function(){return this.$store.state.discourseUsername},set:function(e){this.$store.commit("updateDiscourseUsername",e)}},discourseToken:{get:function(){return this.$store.state.discourseToken},set:function(e){this.$store.commit("updateDiscourseToken",e)}},createUnit:{get:function(){return this.$store.state.createUnit},set:function(e){this.$store.commit("updateCreateUnit",e)}}}},oe=ne,ie=Object(o["a"])(oe,se,ae,!1,null,"2da9cfd0",null),ce=ie.exports;function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(r),!0).forEach((function(t){Object(te["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var de={name:"Discourse",components:{DiscourseOptions:ce},data:function(){return{dryRun:!1,logs:[],parentCategories:[],existingCategories:[]}},computed:{plan:function(){try{this.$store.commit("updatePlan",JSON.parse(this.$store.state.rawData))}catch(e){console.log("invalid json")}return this.$store.state.plan},categoryCount:function(){return this.$store.state.plan.length},subcategoryCount:function(){return this.$store.state.createUnit?this.$store.state.plan.reduce((function(e,t){return e+t.subsections.reduce((function(e,t){return e+t.units.length}),0)}),0):this.$store.state.plan.reduce((function(e,t){return e+t.subsections.length}),0)}},methods:{fetchCategories:function(){var e=this;return new Promise((function(t,r){e.$http.get(e.$store.state.discourseUrl+"categories.json",{headers:{"Api-Key":e.$store.state.discourseToken,"Api-Username":e.$store.state.discourseUsername}}).then((function(s){s.body.category_list&&s.body.category_list.categories&&(e.parentCategories=s.body.category_list.categories,e.$http.get(e.$store.state.discourseUrl+"site.json",{headers:{"Api-Key":e.$store.state.discourseToken,"Api-Username":e.$store.state.discourseUsername}}).then((function(r){r.body.categories&&(e.existingCategories=e.parentCategories.reduce((function(e,t){return e.push(t),t.subcategory_ids&&t.subcategory_ids.forEach((function(t){e.push(r.body.categories.find((function(e){return e.id===t})))})),e}),[])),t()}),(function(e){alert("Error while fetching categories, please check discourse options"),r(e)})))}),(function(e){alert("Error while fetching categories, please check discourse options"),r(e)}))}))},updateCategory:function(e){var t=this;this.$http.put(this.$store.state.discourseUrl+"categories/"+e.id,this.getFormData({name:e.name,color:e.color,text_color:e.text_color}),{headers:{"Api-Key":this.$store.state.discourseToken,"Api-Username":this.$store.state.discourseUsername}}).then((function(e){t.fetchCategories()}),(function(e){alert("Error updating category")}))},deleteCategory:function(){var e=Object(re["a"])(regeneratorRuntime.mark((function e(t){var r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.logs=[],e.next=3,this.fetchCategories();case 3:if(r=this.existingCategories.find((function(e){return e.id===t})),r){e.next=7;break}return alert("Error deleting category (category doesn't exist)"),e.abrupt("return");case 7:if(!(r.subcategory_ids&&r.subcategory_ids.length>0)){e.next=27;break}if(window.confirm("Do you really want to delete the category (id: ".concat(t,") and all its subcategories (total: ").concat(r.subcategory_ids.length+1," categories) ?"))){e.next=10;break}return e.abrupt("return");case 10:this.log("Deleting subcategories","success"),s=0;case 12:if(!(s<r.subcategory_ids.length)){e.next=27;break}return e.prev=13,e.next=16,this.deleteSingleCategory(r.subcategory_ids[s]);case 16:this.log("Subcategory ".concat(r.subcategory_ids[s]," deleted"),"success"),e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](13),this.log("Subcategory ".concat(r.subcategory_ids[s]," not deleted"),"error");case 22:return e.next=24,this.sleep(500);case 24:s++,e.next=12;break;case 27:return e.prev=27,e.next=30,this.deleteSingleCategory(t);case 30:this.log("Category ".concat(t," deleted"),"success"),e.next=36;break;case 33:e.prev=33,e.t1=e["catch"](27),this.log("Category ".concat(t," not deleted"),"error");case 36:return e.next=38,this.fetchCategories();case 38:case"end":return e.stop()}}),e,this,[[13,19],[27,33]])})));function t(t){return e.apply(this,arguments)}return t}(),deleteSingleCategory:function(){var e=Object(re["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$http.delete(this.$store.state.discourseUrl+"categories/"+t,{headers:{"Api-Key":this.$store.state.discourseToken,"Api-Username":this.$store.state.discourseUsername}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),alert("Error deleting category (category is not empty or too many request, check console)");case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(t){return e.apply(this,arguments)}return t}(),hideAllAboutCategories:function(){var e=Object(re["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.logs=[],e.next=3,this.fetchCategories();case 3:t=this.existingCategories.map((function(e){return e["topic_url"]})),r=0;case 5:if(!(r<t.length)){e.next=20;break}return e.prev=6,e.next=9,this.updateSingleTopicStatus(t[r],{status:"visible",enabled:!1});case 9:this.log("Topic ".concat(t[r]," hidden"),"success"),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](6),this.log("Topic ".concat(t[r]," not hidden"),"error");case 15:return e.next=17,this.sleep(500);case 17:r++,e.next=5;break;case 20:case"end":return e.stop()}}),e,this,[[6,12]])})));function t(){return e.apply(this,arguments)}return t}(),updateSingleTopicStatus:function(){var e=Object(re["a"])(regeneratorRuntime.mark((function e(t,r){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.split("/").pop(),e.prev=1,e.next=4,this.$http.put(this.$store.state.discourseUrl+"t/"+s+"/status.json",this.getFormData(r),{headers:{"Api-Key":this.$store.state.discourseToken,"Api-Username":this.$store.state.discourseUsername}});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](1),alert("Error updating topic (check console)");case 9:case"end":return e.stop()}}),e,this,[[1,6]])})));function t(t,r){return e.apply(this,arguments)}return t}(),createCategories:function(){var e=Object(re["a"])(regeneratorRuntime.mark((function e(t){var r,s,a,n,o,i,c,u,l,d,p,m,f,h,v,g,b,y,_,C,x,$,U,k,w,O,D,T,j,P,S,E,R,A;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fetchCategories();case 2:this.dryRun=!!t,this.logs=[],r=!0,s=!1,a=void 0,e.prev=7,n=this.plan[Symbol.iterator]();case 9:if(r=(o=n.next()).done){e.next=114;break}if(i=o.value,!this.$store.state.createUnit){e.next=80;break}return c=i.title.replace("Module ","M"),e.next=15,this.createCategory(c);case 15:u=e.sent,l=!0,d=!1,p=void 0,e.prev=19,m=i.subsections[Symbol.iterator]();case 21:if(l=(f=m.next()).done){e.next=64;break}h=f.value,v=!0,g=!1,b=void 0,e.prev=26,y=h.units[Symbol.iterator]();case 28:if(v=(_=y.next()).done){e.next=47;break}if(C=_.value,x=-1!==i.title.indexOf("Module")?c.split(":")[0].split(".")[0]:"",$=/\d+\.(\d)(?:\.(\d))?/.exec(h.title),U=$?"M"+$[0]+" ":x,k=C.title.replace("Lecture: ","").replace("Video: ","").replace(/\[.*?\]/g,""),w="".concat(U).concat(k).trim().replace(/\s{2,}/g," ").substring(0,50),new RegExp(["Forum","overview"].join("|")).test(w)){e.next=44;break}return e.prev=36,e.next=39,this.createCategory(w,u);case 39:e.next=44;break;case 41:e.prev=41,e.t0=e["catch"](36),console.log("Error creating category : "+w);case 44:v=!0,e.next=28;break;case 47:e.next=53;break;case 49:e.prev=49,e.t1=e["catch"](26),g=!0,b=e.t1;case 53:e.prev=53,e.prev=54,v||null==y.return||y.return();case 56:if(e.prev=56,!g){e.next=59;break}throw b;case 59:return e.finish(56);case 60:return e.finish(53);case 61:l=!0,e.next=21;break;case 64:e.next=70;break;case 66:e.prev=66,e.t2=e["catch"](19),d=!0,p=e.t2;case 70:e.prev=70,e.prev=71,l||null==m.return||m.return();case 73:if(e.prev=73,!d){e.next=76;break}throw p;case 76:return e.finish(73);case 77:return e.finish(70);case 78:e.next=111;break;case 80:return O=i.title.substring(0,50),e.next=83,this.createCategory(O);case 83:D=e.sent,T=!0,j=!1,P=void 0,e.prev=87,S=i.subsections[Symbol.iterator]();case 89:if(T=(E=S.next()).done){e.next=97;break}return R=E.value,A="".concat(R.title).substring(0,50),e.next=94,this.createCategory(A,D);case 94:T=!0,e.next=89;break;case 97:e.next=103;break;case 99:e.prev=99,e.t3=e["catch"](87),j=!0,P=e.t3;case 103:e.prev=103,e.prev=104,T||null==S.return||S.return();case 106:if(e.prev=106,!j){e.next=109;break}throw P;case 109:return e.finish(106);case 110:return e.finish(103);case 111:r=!0,e.next=9;break;case 114:e.next=120;break;case 116:e.prev=116,e.t4=e["catch"](7),s=!0,a=e.t4;case 120:e.prev=120,e.prev=121,r||null==n.return||n.return();case 123:if(e.prev=123,!s){e.next=126;break}throw a;case 126:return e.finish(123);case 127:return e.finish(120);case 128:return e.next=130,this.fetchCategories();case 130:case"end":return e.stop()}}),e,this,[[7,116,120,128],[19,66,70,78],[26,49,53,61],[36,41],[54,,56,60],[71,,73,77],[87,99,103,111],[104,,106,110],[121,,123,127]])})));function t(t){return e.apply(this,arguments)}return t}(),createCategory:function(e,t){var r=this;return new Promise((function(s,a){var n=r.randomColor(),o=r.existingCategories.find((function(t){return t.name===e})),i={name:e,color:n,text_color:"ffffff"},c=e;t&&(i.color=t.color,i.parent_category_id=t.id,c="├── "+e),o?(r.log(c+" (Category already exists)","warning"),s({id:o.id,color:o.color})):setTimeout((function(){r.postCategoryRequest(i).then((function(e){var t=e.body.category;r.log(c+" (id: ".concat(t.id," ").concat(t.parentId?"parentId: "+t.parentId:"",")"),"success"),s({id:t.id,color:n})}),(function(e){r.log(c,"error"),a(new Error(e.body))}))}),r.dryRun?10:500)}))},postCategoryRequest:function(e){return this.dryRun?Promise.resolve({body:{category:le({id:Date.now().toString().substr(-4),color:"#fff"},!!e.parent_category_id&&{parentId:e.parent_category_id})}}):this.$http.post(this.$store.state.discourseUrl+"categories.json",this.getFormData(e),{headers:{"Api-Key":this.$store.state.discourseToken,"Api-Username":this.$store.state.discourseUsername}})},log:function(e,t){this.logs.push({message:e,type:t}),this.$nextTick((function(){this.$refs.logContainer&&this.$refs.logContainer.scrollTo(0,this.$refs.logContainer.scrollHeight+20)}))},randomColor:function(){for(var e="0123456789ABCDEF",t="",r=0;r<6;r++)t+=e[Math.floor(16*Math.random())];return t},getFormData:function(e){var t=new FormData;return Object.keys(e).forEach((function(r){return t.append(r,e[r])})),t},sleep:function(e){return new Promise((function(t){return setTimeout(t,e)}))}}},pe=de,me=(r("290a"),Object(o["a"])(pe,Z,ee,!1,null,"e29104de",null)),fe=me.exports;s["a"].use(l["a"]);var he=new l["a"]({routes:[{path:"/",name:"home",component:v},{path:"/toc",name:"toc",component:Y},{path:"/discourse",name:"discourse",component:fe}]}),ve=r("2f62"),ge=r("a6c1"),be=r.n(ge);s["a"].use(ve["a"]);var ye=new ve["a"].Store({state:{baseUrl:"",rawData:"",plan:[],source:"",depth:3,template:"table",discourseToken:"",discourseUrl:"",discourseUsername:"",createUnit:!1},mutations:{updateBaseUrl:function(e,t){s["a"].set(e,"baseUrl",t)},updateRawData:function(e,t){s["a"].set(e,"rawData",t)},updatePlan:function(e,t){s["a"].set(e,"plan",t)},updateSource:function(e,t){s["a"].set(e,"source",be.a.html_beautify(t))},updateDepth:function(e,t){s["a"].set(e,"depth",t)},updateTemplate:function(e,t){s["a"].set(e,"template",t)},updateDiscourseUrl:function(e,t){s["a"].set(e,"discourseUrl",t)},updateDiscourseUsername:function(e,t){s["a"].set(e,"discourseUsername",t)},updateDiscourseToken:function(e,t){s["a"].set(e,"discourseToken",t)},updateCreateUnit:function(e,t){s["a"].set(e,"createUnit",t)}},actions:{}}),_e=r("28dd");r("7a07"),r("2698");s["a"].config.productionTip=!1,s["a"].use(_e["a"]),new s["a"]({router:he,store:ye,render:function(e){return e(u)}}).$mount("#app")},ba8f:function(e,t,r){"use strict";r("44d1")},de66:function(e,t,r){"use strict";r("0670")}});
//# sourceMappingURL=app.js.map